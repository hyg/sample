## js: [nextcloud]

- https://www.npmjs.com/package/nextcloud-node-client/v/1.5.1
	- 有share功能，但是默认url拼接方式和tab.digital不同。
	- 手工修改库代码也许可以兼容，但以后就要自己维护。
	- 分析库代码找到更基础的依赖，然后再定。
```

  /**
   * create a new share
   */
  public async createShare(options: ICreateShare): Promise<Share> {
    const shareRequest = Share.createShareRequestBody(options);
    log.debug(shareRequest);

    const requestInit: RequestInit = {
      body: shareRequest,
      headers: this.getOcsHeaders(),
      method: "POST",
    };
    const url = this.nextcloudOrigin + "/ocs/v2.php/apps/files_sharing/api/v1/shares";

    // try {
    const response: Response = await this.getHttpResponse(url, requestInit, [200, 204], { description: "Share create" });

    const rawResult: { ocs: { data: { id: string } } } = (await response.json()) as { ocs: { data: { id: string } } };

    log.debug(rawResult);

    const share: Share = await Share.getShare(this, rawResult.ocs.data.id);

    if (options.publicUpload) {
      await share.setPublicUpload();
    }

    return share;

    /* } catch (e) {
            log.debug("result " + e.message);
            log.debug("requestInit ", JSON.stringify(requestInit, null, 4));
            log.debug("headers " + JSON.stringify(headers, null, 4));
            log.debug("url ", url);
            throw e;
        } */
  }
```
- https://www.npmjs.com/package/webdav
- https://www.npmjs.com/package/@nextcloud/files
	- 缺少share功能。
- https://www.npmjs.com/package/@nextcloud/sharing
- https://github.com/nextcloud-libraries/nextcloud-sharing
- https://nextcloud-libraries.github.io/nextcloud-sharing/
	- 只是判断和去token。
- d:\huangyg\git\sample\chokidar\
	- 8.10没有用现成的包，直接用web方式使用。 
	- 人工创建draft文件，设置只读共享，在季度时间模版保存url。
	- 文件路径中的斜杠需要处理一下，最好在day.js中就使用windows的"\
	- 返回true而文件内容没变。
- 追加时间，使用url访问试试。
